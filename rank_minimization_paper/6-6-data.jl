"units and conversion";

l_G = [1000,0,500,0,0,0,0] ## load gas
Pressure_limits = [30,40]
v_max = [200 240] ## kg/s
v_min = [30 50] ## Max/min gas injection
Δt = 300 ## seconds
N_T = Int(3600/Δt)
cost_GS=[1.2,1]
# N_T = 12
const N_Hr = 4

Diameter_Multiplier = 1 # .9 for case 1


Δx = 5000
pip_length = [100,80,120,100,80/2,80/2]*1e3

ρ = 0.9756 ## MBtu conversion to MCF (kcf)
fr = 0.005 # friction factor
c_s = 410 # speed of sound in m/s
feet_cm = 30.48
psig_Pa = 6894.757
bar_psia = 14.504
psia_psig = -14.696 ## additive
bar_atm = 0.986923
R = 82.1 ## (atm.cm^3)/(mole.K)
M = 19 ## (gr/mole) for natural gas
Tmpr = 283.15 ## K (50 Fahrenheit)
bar_Pa = 1e5

ρ0 = 0.8 ## standard at 1 atm (kg/m^3)

kcf_kg = 1000*(feet_cm/100)^3/bar_atm

"input data";

s_base = 100 ## 100 MVA
v_base = 33 ## 33kV
z_base = v_base^2/s_base

const N_I = 2 ## Number of units
const N_U = 1 ## Number of gas-fueled units
const N_R = 2 ## Number of renewable source
const N_B = 6 ## Number of buses
const N_BR = 6 ## Number of transmission lines

gen_bus = [1,4]
ren_bus = [2,5]

## Cost function coefficient of gas-fired unit
c0 = [0.0010, 0.00045]
c = c0 * s_base^2
b0 = [40,13.5]
b = b0 * s_base
a = [130, 177]
P_max0 = [200,200] ## (i) Max generation capacity of unit i,in MW
P_max = P_max0/s_base
P_min0 = [0,40] ## (i) Min generation capacity of unit i,in MW
P_min = P_min0/s_base

PF = zeros(N_R,24)  ## (r,t) Forecasted value of renewable source output

# PV curve
PF[1,:] = vcat(zeros(6),
        [0.07, 0.21, 0.44, 0.69, 0.83, 0.94, 0.96, 0.93, 0.83, 0.69, 0.31, 0.09],
        zeros(6))

# WT curve
PF[2,:] = [16.39,10.53,8.69,8.29,17.92,16.85,17.64,13.34,
    18.2,17.84,15.86,19.64,14.93,11.76,9.24,10.14,
    11.08,12.7,16.45,18.62,16.08,18.04,19.05,17.68]/s_base


PD_Total = [166.4, 156, 150.8, 145.6, 145.6, 150.8, 166.4, 197.6,
    226.2, 247, 257.4, 260, 257.4, 260, 240, 252.2, 249.6, 249.6,
     241.8, 239.2, 239.2, 241.8, 226.2, 187.2]/s_base

bus_load = [0,.2,.3,0,.3,.2]

###############################################################################
"NATURAL GAS SIDE";


const N_GN = 7 ## Number of natural gas nodes
const N_GS = 2 ## Number of natural gas suppliers
const N_P = 6 ## N pipes
const N_C = 1 ## N compressors

gas_hourly = [0.78, 0.71, 0.65, 0.71, 0.76, 0.8, 0.82, 0.89, 0.83,
    0.93, 0.90, 0.88, 0.92, 0.81, 0.76, 0.78, 0.86, 0.96,
    0.99, 1.1, 0.93, 0.91, 0.87, 0.81, 0.78]

## Fuel function coefficient of gas-fired unit
α0 = [0.0004, 0.0010, 0.0050]
β0 = [13.51, 32.63, 17.7]
γ0 = [176.95, 129.97, 137.41]
α = α0 * s_base^2
β = β0 * s_base
γ = γ0

J = ["a","b","c","d","e","f","comp."]
gen_node = [J[1],J[2],J[3]]
comp_node = [7]

pip_data = [J[1] J[2]; J[2] J[4]; J[2] J[7]; J[7] J[5]; J[3] J[5]; J[5] J[6]]

pip_diamater = Diameter_Multiplier*2.5*[.6096, .6096, .6096, .6096, .6096, .6096]

node_supplier = [J[4], J[6]]

##
#
D_CAISO = [24694, 24660, 24566, 24439, 24303, 24119, 24035, 23919, 23795, 23678, 23557, 23424, 23281, 23213, 23135, 23055, 22970, 22869, 22794, 22665, 22587, 22476, 22380, 22286, 22235, 22127, 22053, 22008, 21953, 21879, 21800, 21751, 21668, 21620, 21563, 21525, 21531, 21391, 21326, 21318, 21260, 21237, 21208, 21205, 21180, 21187, 21154, 21118
        ,21146, 21170, 21234, 21265, 21302, 21315, 21289, 21336, 21402, 21402, 21438, 21464, 21554, 21669, 21831, 21900, 22014, 22073, 22141, 22250, 22336, 22421, 22497, 22579, 22714, 23007, 23268, 23470, 23590, 23735, 23764, 23899, 24039, 24036, 24114, 24135, 24200, 24361, 24482, 24511, 24597, 24656, 24705, 24755, 24824, 24845, 24833, 24880, 24949
        ,25125, 25180, 25218, 25232, 25281, 25247, 25266, 25333, 25330, 25397, 25367, 25412, 25400, 25417, 25492, 25551, 25544, 25585, 25604, 25613, 25670, 25711, 25705, 25743, 25795, 25864, 25938, 25893, 25868, 25926, 25980, 26006, 26061, 26053, 26121, 26198, 26262, 26312, 26371, 26450, 26510, 26588, 26616, 26694, 26790, 26897, 26998, 27138, 27332, 27493
        ,27610, 27703, 27861, 27976, 28070, 28297, 28493, 28653, 28777, 28886, 29068, 29301, 29541, 29669, 29805, 29939, 30060, 30110, 30314, 30547, 30674, 30717, 30847, 31073, 31345, 31529, 31728, 31819, 31927, 32139, 32284, 32367, 32463, 32587, 32691, 32818, 32888, 33021, 33144, 33249, 33339, 33443, 33547, 33734, 33784, 33821, 33779, 33803, 34021, 34051
        ,34066, 34113, 34117, 34064, 34025, 34169, 34270, 34270, 34232, 34219, 34234, 34266, 34272, 34307, 34270, 34230, 34258, 34241, 34171, 34121, 33895, 33752, 33698, 33701, 33674, 33694, 33729, 33753, 33829, 33869, 33880, 33893, 33852, 33756, 33730, 33663, 33539, 33455, 33339, 33171, 33033, 32898, 32754, 32543, 32434, 32389, 32241, 32103, 31921, 31769
        ,31622, 31464, 31310, 31138, 30992, 30813, 30726, 30650, 30500, 30288, 30121, 29955, 29812, 29670, 29473, 29316, 29107, 28877, 28657, 28510, 28320, 28116, 27899, 27710, 27537, 27367, 27143, 26969, 26741, 26527, 26366, 26212, 26028, 25860, 25709, 25560, 25383, 25226, 25072, 24888, 24747
]
# plot(D_CAISO[Hr0*12:Hr0*12+48])
D_CAISO = D_CAISO/findmax(D_CAISO)[1]
D_CAISO = reshape(D_CAISO,12,24)'
